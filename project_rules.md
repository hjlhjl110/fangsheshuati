
你在任何操作前必读：
你必须认真严谨的逐行排查所有相关代码，找出问题的真正原因
然后请根据以下流程进行问题排查和修复、新功能的开发、代码的删/改/增（请严格按照下方的顺序执行，不要乱序执行）

1. 问题定位阶段（可通过context7 MCP搜索最新的技术）

- 现象分析：详细描述问题表现（包括错误提示、异常行为、复现步骤、发生频率等）

- 关键路径排查：

• 按照数据流向：前端 → 网络请求（请求头/体、响应状态/数据等） → 后端API（输入验证、业务逻辑等） → 数据库操作（SQL语句、事务、连接等） → 后端API（返回验证、错误码、数据等） → 前端（数据处理、页面渲染等）

• 核心检查点：数据格式一致性、状态传递正确性、权限验证完整性、语法错误、业务逻辑缺陷、API接口兼容性等（前端与后端是否匹配）

- 扩大排查（若未定位问题）：

• 审查系统日志（错误、警告、调试信息等）及异常堆栈跟踪

• 检查第三方依赖版本（比对预期版本，确认兼容性）

• 验证环境配置（开发、测试、生产环境差异，配置文件等）
• 还要修复一些未发现的错误和潜在错误和风险
•前端（客户端）代码排查，特别是与功能相关代码

- 扩大排查（若已定位问题）：

• 全局搜索项目中相同或相似模式代码，确认是否存在同类问题
• 还要修复一些未发现的错误和潜在错误和风险

2. 修改方案确认（可通过context7 MCP搜索最新的技术）

- 代码修改点：

• 文件路径：src/path/file.ext

• 行号范围：L100-L105

• 变更类型：[修复/优化]

• 代码对比（原代码 → 新代码）：

```原语言

原代码片段

```

```新语言

新代码片段

```

- 数据库变更（如需要）：

• [新增] 字段：table.column (类型, 约束) [说明：新增原因]

• [修改] 字段：table.old_column → new_column [说明：修改原因，并提供数据迁移方案]

• [禁止] 删除字段/修改核心结构（除非有充分理由并经过审核）

3. 约束确认（执行前必读）

- 结构保护：仅修改与问题直接相关的架构和设计模式

- 功能保护：确保不影响其他正常功能（通过回归测试覆盖）

- 界面保护：仅修改与问题直接相关的样式/布局调整（如有必要，单独评估）

- 范围限定：仅修改与问题直接相关的代码，禁止重构无关部分

4. 修复实施（可通过context7 MCP搜索最新的技术）

- 简单修改：直接提供完整可替换的代码块

- 复杂模块（涉及多层改动）：

Step1: 前端适配（修改请求参数/处理响应，确保界面交互不变）

验证点：前端功能自测

Step2: 接口调整（修改API接口，保持兼容性或版本管理）

验证点：接口契约测试

Step3: 后端修改（业务逻辑，包含事务和锁处理，API字段与数据库字段匹配，如果后端API的用户名，密码，库名等已配置，要直接用脚本或命令访问API核实API字段是否与数据库字段、前端解析字段都匹配）

验证点：业务一致性测试

    
Step4: 数据层修改（数据库操作逻辑，包含事务和锁处理，数据库字段与后端API匹配，如果数据库的用户名，密码，库名等已配置，要直接用脚本或命令访问数据库核实数据库字段是否与后端SQL语句里的字段、API字段，前端解析字段都匹配）

验证点：数据一致性测试

-错误监测：在修改过程引入错误监测机制，如使用错误语法、错误函数、错误导入等请及时修正，确保在出现错误时能够及时捕获并处理




5. 验证标准（可通过context7 MCP搜索最新的技术）

- 数据流验证：前端提交数据 ↔ API接收处理 ↔ DB存储一致性

- 功能回归：核心业务流程测试，并覆盖关联功能

- 界面比对：使用截图工具进行像素级比对，确保无变化

- 关键路径复查：按照“前端→网络→后端→数据库”路径重新排查，检查点包括：

• 数据格式、状态传递、权限验证、语法错误、逻辑错误、API匹配

- 问题闭环：若验证中发现任何异常，立即终止并返回问题定位阶段（阶段1）重新开始，直至通过全部检查。

  若过程中创建过脚本文件用来测试，过过程结束后请删除测试脚本


6. 请保持对话语言为中文
7. 我的系统为 Windows
8. 请在生成代码时添加函数级注释
9. 请在每次新增功能或修改功能后，都要更新项目的文档README，包括新增的功能描述、代码结构、接口定义、数据库变更（如果有）
10. 每次修改完后前端网页的话使用hyperbrowserai测试所有的功能是否正常
11. 禁止修改数据库的report_info表的结构和数据，包括但不限于:
    - 禁止删除或修改现有字段
    - 禁止新增字段
    - 禁止修改字段类型、约束条件
    - 禁止删除或修改已有数据
    - 禁止修改表的索引结构
    - 仅允许查询操作
12. 你可以调用现有的任何MCP工具，但需要遵循以下规则：
    - 在使用工具前，需要先检查工具的版本兼容性
    - 调用工具时需要进行异常处理和错误日志记录
    - 对于涉及系统关键操作的工具调用，需要进行权限验证
    - 工具调用完成后需要及时释放相关资源
    - 禁止调用已标记为废弃的工具方法
    - 我的数据库是MySQL，查询数据库时，可以使用MySQL MCP工具
    -
13. 开发时始终遵循以下设计原则:
    - 工厂模式：使用工厂方法创建对象，而不是直接实例化
    - 依赖注入：通过接口注入依赖，降低模块间耦合
    - 单一职责：每个类只负责一个功能或职责
    - 开闭原则：对扩展开放，对修改关闭
    - 接口隔离：客户端不应依赖它不需要的接口
    - 里氏替换：子类必须能替换其父类
    - DRY原则：避免代码重复
    - KISS原则：保持代码简单直观
14. 在使用python命令时，请以python开头，例如python -m pip install requests
15. 在使用powershell命令时，需要使用连接符时，请使用分号，例如：py -m pip install requests; py -m pip install playwright
16. 在终端长时间没有输出结果时，请使用Ctrl+C终止命令，并进行下一步操作